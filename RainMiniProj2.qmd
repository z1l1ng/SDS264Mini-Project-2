---
title: "StardewInterestDS"
author: "Rain Hartos"
format: pdf
editor_options: 
  chunk_output_type: console
---

```{r}
#| include: FALSE

library(tidyverse)
library(stringr)
library(rvest)
library(polite)
library(sf)
library(maps)
library(viridis)
library(leaflet)
library(htmltools)
library(janitor)

```

## Areas of Interest

**Items**

-   IDs

-   Name

-   Image (png) *We will need to look into*

-   base price

-   sell price

**Characters**

Possible sites to scrapes:

<https://stardewids.com/>

<https://stardewvalleywiki.com/Category:Items>

## List of all the items

```{r}
# check that scraping is allowed 
robotstxt::paths_allowed("https://stardewids.com")

session <- bow("https://stardewids.com", force = TRUE)

result <- scrape(session) |>
  html_nodes(css = "table") |> 
  html_table(header = TRUE, fill = TRUE)

sd_itemid <- result[[1]]
```

### List of animal items

sd_animal_prices

```{r}
robotstxt::paths_allowed("https://stardewvalleywiki.com/Animal_Products_Profitability")

session <- bow("https://stardewvalleywiki.com/Animal_Products_Profitability", force = TRUE)

result_animals <- scrape(session) |>
  html_nodes(css = "table") |> 
  html_table(header = TRUE, fill = TRUE)

sd_animal_prices <- result_animals[[2]]
```

```{r}
#clean up the sd_animal_prices tibble

tidy_sd_animal_price<-sd_animal_prices|>
  clean_names()|>
  select(item, 
         profession, 
         quality, 
         sell_price)|>
  group_by(item, profession)|>
  pivot_wider(names_from = quality, 
              values_from = sell_price, 
              names_glue = "{quality}_price",
              values_fn = mean)|>
  clean_names()|>
  mutate(category = "animal product")
```
